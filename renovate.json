{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "github>platform-engineering-org/.github",
    "github>konflux-ci/mintmaker//config/renovate/renovate.json"
  ],
  "dependencyDashboard": true,
  "automergeType": "pr",
  "enabledManagers": [
    "custom.regex",
    "tekton"
  ],
  "tekton": {
    "additionalBranchPrefix": "",
    "includePaths": [
      ".tekton/**"
    ],
    "managerFilePatterns": [
      "/\\.ya?ml$/"
    ]
  },
  "baseBranchPatterns": [
    "main"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": [
        "Update 'REPOS_IMAGE' in tekton files"
      ],
      "managerFilePatterns": [
        "/.tekton/.*\\.ya?ml$/"
      ],
      "matchStrings": [
        "REPOS_IMAGE=(?<depName>.*):(?<currentValue>.*)@(?<currentDigest>.*)\\n"
      ],
      "versioningTemplate": "regex:(?<compatibility>.*)-(?<patch>\\d{8})(\\.n)?\\.(?<build>\\d)",
      "datasourceTemplate": "docker"
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["tekton"],
      "matchPackageNames": ["/quay.io/bootc-devel/tekton-catalog/"],
      "matchFileNames": [".tekton/fedora-bootc-43-*"],
      "groupName": "Fedora 43 bootc-pipeline",
      "groupSlug": "fedora-43-bootc-pipeline",
      "branchPrefix": "renovate/fedora-43/",
      "commitMessageTopic": "Fedora 43 bootc pipeline",
      "schedule": ["after 2am and before 5am"],
      "timezone": "UTC",
      "recreateWhen": "always",
      "rebaseWhen": "always",
      "additionalBranchPrefix": ""
    },
    {
      "matchManagers": ["custom.regex"],
      "matchPackageNames": ["/quay.io/bootc-devel/fedora-bootc-43-compose/"],
      "matchFileNames": [".tekton/fedora-bootc-43-*"],
      "groupName": "Fedora 43 REPOS_IMAGE",
      "groupSlug": "fedora-43-repos-image",
      "branchPrefix": "renovate/fedora-43/",
      "commitMessageTopic": "Fedora 43 REPOS_IMAGE",
      "schedule": ["at any time"],
      "recreateWhen": "always",
      "rebaseWhen": "never",
      "additionalBranchPrefix": ""
    },
    {
      "matchManagers": ["tekton"],
      "matchPackageNames": ["/quay.io/bootc-devel/tekton-catalog/"],
      "matchFileNames": [".tekton/fedora-bootc-rawhide-*"],
      "groupName": "Fedora Rawhide bootc-pipeline",
      "groupSlug": "fedora-rawhide-bootc-pipeline",
      "branchPrefix": "renovate/fedora-rawhide/",
      "commitMessageTopic": "Fedora Rawhide bootc pipeline",
      "schedule": ["at any time"],
      "timezone": "UTC",
      "recreateWhen": "always",
      "rebaseWhen": "always",
      "additionalBranchPrefix": ""
    },
    {
      "matchManagers": ["custom.regex"],
      "matchPackageNames": ["/quay.io/bootc-devel/fedora-bootc-rawhide-compose/"],
      "matchFileNames": [".tekton/fedora-bootc-rawhide-*"],
      "groupName": "Fedora Rawhide REPOS_IMAGE",
      "groupSlug": "fedora-rawhide-repos-image",
      "branchPrefix": "renovate/fedora-rawhide/",
      "commitMessageTopic": "Fedora Rawhide REPOS_IMAGE",
      "schedule": ["at any time"],
      "recreateWhen": "always",
      "rebaseWhen": "never",
      "additionalBranchPrefix": ""
    }
  ]
}
